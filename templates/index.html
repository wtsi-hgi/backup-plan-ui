<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Backup Plan UI</title>
    <link rel="stylesheet" href="static/styles.css">
    <script src="https://unpkg.com/htmx.org@1.9.12"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
</head>
<body>
    <h1>HumGen and GenGen backup plan</h1>

    <div class="table-container">
        <div class="table-actions">
            <button class="btn primary"
                    hx-get="actions/add"
                    hx-target="#add-row-container"
                    hx-swap="innerHTML">
                Add Row
            </button>
        </div>
        
        <div id="add-row-container"></div>
        
        <table class="table">
          <thead>
            <tr>
              <th>
                <div class="tooltip">Reporting name
                  <span class="tooltiptext right">A simple name that makes the report line easy to interpret.</span>
                </div>
              </th>
              <th>
                <div class="tooltip">Reporting root
                  <span class="tooltiptext top">The lustre directory root for the report : typically full path to project or user folder (or subfolder, if appropriate).</span>
                </div>
              </th>
              <th>
                <div class="tooltip">Directory
                  <span class="tooltiptext top">Full path to the folder where you want a backup or no backup to happen.</span>
                </div>
              </th>
              <th>
                <div class="tooltip">Instruction
                  <span class="tooltiptext top">In the specified folder, do you want a backup, no backup, or a temp backup to happen? Temp means the backup is kept for 3 months.</span>
                </div>
              </th>
              <th>
                <div class="tooltip">Match
                  <span class="tooltiptext top">Only back up the file paths in the folder that match the given expression(s), only available when instruction is 'backup'.</span>
                </div>
              </th>
              <th>
                <div class="tooltip">Ignore
                  <span class="tooltiptext top">Never back up the file paths that match the given expression(s), only available when instruction is 'backup'.</span>
                </div>
              </th>
              <th>
                <div class="tooltip">Requestor
                  <span class="tooltiptext top">User id of the person requesting the plan.</span>
                </div>
              </th>
              <th>
                <div class="tooltip">Faculty
                  <span class="tooltiptext top">Faculty group / team of the person requesting the plan.</span>
                </div>
              </th>
              <th>Actions</th>
            </tr>
          </thead>
            <tbody 
                hx-get="entries"
                hx-trigger="load, entriesChanged from:body"
                hx-target="this" 
                hx-swap="innerHTML">
            </tbody>
        </table>
    </div>

    <script>
        // Alpine.js component for reusable tag input
        function tagInputComponent(initialTags = [], inputName = '') {
          return {
            tags: initialTags,
            newTag: '',
            name: inputName,
            addTag() {
              const tag = this.newTag.trim();
              if (tag && !this.tags.includes(tag)) {
                this.tags.push(tag);
              }
              this.newTag = '';
            },
            removeTag(i) {
              this.tags.splice(i, 1);
            }
          }
        }
      </script>
</body>
</html>

<script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
