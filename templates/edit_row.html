<tr hx-trigger='cancel' 
    class='editing' 
    hx-get="/actions"
    hx-target="closest tr" 
    hx-swap="outerHTML">
    <td>
        <input autofocus name='ReportingName' value="{{.ReportingName}}">
    </td>
    <td>
        <input name='ReportingRoot' value="{{.ReportingRoot}}">
    </td>
    <td>
        <input name='Directory' value="{{.Directory}}">
    </td>
    <td>
        <select name="Instruction">
            <option value="backup" {{if eq .Instruction "backup"}}selected{{end}}>backup</option>
            <option value="nobackup" {{if eq .Instruction "nobackup"}}selected{{end}}>nobackup</option>
            <option value="tempbackup" {{if eq .Instruction "tempbackup"}}selected{{end}}>tempbackup</option>
        </select>
    </td>
    <td>
      <div
        x-data="{
          tags: '{{join .Match}}'.split(',').map(t => t.trim()).filter(Boolean),
          newTag: '',
          addTag() {
            const tag = this.newTag.trim();
            if (tag && !this.tags.includes(tag)) {
              this.tags.push(tag);
            }
            this.newTag = '';
          },
          removeTag(i) {
            this.tags.splice(i, 1);
          }
        }"
      >
        <!-- Chip list -->
        <template x-for="(tag, i) in tags" :key="i">
          <span class="tag">
            <span x-text="tag"></span>
            <button type="button" @click="removeTag(i)">&times;</button>
          </span>
        </template>
    
        <!-- Input box -->
        <input
          type="text"
          x-model="newTag"
          @keydown.enter.prevent="addTag"
          @keydown.,.prevent="addTag"
          placeholder="Add value and press Enter"
        >
    
        <!-- Hidden input for backend -->
        <input type="hidden" name="Match" :value="tags.join(', ')">
      </div>
    </td>
    <td>   
        <div
          x-data="{
            tags: '{{join .Ignore}}'.split(',').map(t => t.trim()).filter(Boolean),
            newTag: '',
            addTag() {
              const tag = this.newTag.trim();
              if (tag && !this.tags.includes(tag)) {
                this.tags.push(tag);
              }
              this.newTag = '';
            },
            removeTag(i) {
              this.tags.splice(i, 1);
            }
          }"
        >

        <div class="tag-container">
            <!-- Chip list -->
            <template x-for="(tag, i) in tags" :key="i">
              <div class="tag">
                <span x-text="tag"></span>
                <button type="button" @click="removeTag(i)">&times;</button>
              </div>
            </template>
        
            <!-- Input box -->
            <input
              type="text"
              x-model="newTag"
              @keydown.enter.prevent="addTag"
              @keydown.,.prevent="addTag"
              placeholder="..."
            >
        </div>
      
          <!-- Hidden input for backend -->
          <input type="hidden" name="Ignore" :value="tags.join(', ')">
        </div>
    </td>
    <td>
        <input name='Requestor' value="{{.Requestor}}">
    </td>
    <td>
        <input name='Faculty' value="{{.Faculty}}">
    </td>
    <td>
        <button class="btn primary"
            hx-put="/actions/submit/{{.ID}}"
            hx-include="closest tr">
            Save
        </button>
        <button class="btn danger" 
            hx-get="/actions/cancel/{{.ID}}">
            Cancel
        </button>
    </td>
  </tr>